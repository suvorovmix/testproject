# Test Project

Сервис принимает список ссылок, которые были посещены пользователем и возвращает полный список доменов посещенных пользователем

### Требования

Перед запуском проекта убедитесь, что у вас установлены следующие компоненты:

- Python версия: 3.11.6

### Установка

1. Клонируйте репозиторий:
```
git clone https://github.com/suvorovmix/testproject.git
```

2. Перейдите в папку проекта:
```
cd testproject
```

3. Создайте и активируйте виртуальное окружение:
```
python -m venv env
source env/bin/activate  # Для Linux/Mac
```

4. Установите зависимости:
```
pip install -r requirements.txt
```

5. Перейдите в директорию проекта:
```
cd sbertestproject
```

6. Примените миграции:
```
python manage.py migrate
```

7. Замените файл .env.template на ваш файл .env где будет указан ваш секрктный ключ:
```
SECRET_KEY="very_secret_key"
```

### Запуск

1. Запустите сервер разработки Django:
```
python manage.py runserver
```
После этого проект будет доступен по адресу http://127.0.0.1:8000/ (этот эндпоинт ничего не возвращает)

### Использование

Используйте программу Postman для отправки запросов и получения ответов.

1. Запрос на отправку списка ссылок, которые были посещены пользователем (method 'POST')

```
http://127.0.0.1:8000/visited_links/  
```
Тело запроса
```
{
   "links": [
      "https://ya.ru/",
      "https://ya.ru/search/?text=мемы+с+котиками",
      "https://sber.ru",
      "https://stackoverflow.com/questions/65724760/how-it-is"
       ]	
}
```
Успешный ответ
```
{
    "status": "ok"
}
```

2. Запрос на получение списка ВСЕХ уникальных доменов посещенных пользователем (method 'GET')

```
http://127.0.0.1:8000/visited_domains/ 
```

Успешный ответ
```
{
    "domains": [
        "ya.ru",
        "stackoverflow.com",
        "sber.ru"
    ],
    "status": "ok"
}
```

3. Запрос на получение списка уникальных доменов посещенных пользователем ОТФИЛЬТРОВАННЫХ по переданным параметрам запроса (method 'GET')

"from" - integer. С какого времени в формате (число секунд с начала эпохи)
"to" - integer. По какое время в формате (число секунд с начала эпохи)

В запрос можно передавать, как оба параметра "from" и "to" вместе, так и отдельно "from" и отдельно "to"
```
http://127.0.0.1:8000/visited_domains/?from=1706257934&to=1706265134
http://127.0.0.1:8000/visited_domains/?from=1706257934
http://127.0.0.1:8000/visited_domains/?to=1706265134

```

Успешный ответ
```
{
    "domains": [
        "ya.ru",
        "stackoverflow.com",
        "sber.ru"
    ],
    "status": "ok"
}
```

### Тестирование

Для заупска тестов выполните команду:
```
python manage.py test
```

### Дополнительно

Использование Dgango админки

1. Для использования встроенной админки Dgango - создайте суперпользователя.

Выполните команду:
```
python manage.py createsuperuser
```

2. Перейдите по адресу http://127.0.0.1:8000/admin/ и введите логин и пароль суперпользователя


3. Для того, чтобы а админке отображались стили, в настройках приложения:
```
sbertestproject/settings.py
```
Измените значение на:
```
DEBUG = True
```

